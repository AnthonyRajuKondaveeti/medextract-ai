# ── Docker Environment Template ────────────────────────────────────────────────
# Copy this file to .env.docker and update with your actual values
# Then run: docker-compose --env-file .env.docker up -d

# ── OpenAI API Key (REQUIRED) ──────────────────────────────────────────────────
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=your_openai_api_key_here

# ── API Key for Application (REQUIRED) ─────────────────────────────────────────
# Generate a strong random key with: python -c "import secrets; print(secrets.token_hex(32))"
API_KEY=change-me-to-a-strong-random-secret

# ── Database Configuration (Pre-configured for Docker) ─────────────────────────
# No need to change these unless you modify docker-compose.yml
POSTGRES_DB=medextract
POSTGRES_USER=med
POSTGRES_PASSWORD=secret
DATABASE_URL=postgresql://med:secret@db:5432/medextract

# ── OCR Settings (Optional) ────────────────────────────────────────────────────
OCR_CONFIDENCE_THRESHOLD=0.7
OCR_ENGINE_PRIMARY=tesseract
OCR_ENGINE_FALLBACK=tesseract

# ── Mock Mode (Optional) ───────────────────────────────────────────────────────
# Set to "true" to test pipeline without making OpenAI API calls
MOCK_AI=false

# ── Concurrency & Performance (Optional) ───────────────────────────────────────
# Number of PDFs to process simultaneously (default: 10)
# For 300 docs/day workload: 10-12 recommended
MAX_WORKERS=10

# Max concurrent OpenAI API calls (default: 3)
# Lower values prevent rate limiting. Increase for Tier 2+ (with higher RPM limit)
AI_CONCURRENCY=3

# OpenAI API rate limit in requests per minute (default: 450)
# Tier 1: 500 RPM → use 450 (safety margin)
# Tier 2: 5000 RPM → use 4500
# Tier 3+: adjust accordingly - check https://platform.openai.com/account/limits
OPENAI_RATE_LIMIT_RPM=450

# ── Environment ────────────────────────────────────────────────────────────────
ENV=production

# ── Admin Login Credentials ────────────────────────────────────────────────────
# Username for web UI login (default: admin)
ADMIN_USERNAME=admin

# Bcrypt hash of your admin password. Generate with:
#   python -c "import bcrypt; print(bcrypt.hashpw(b'YourPasswordHere', bcrypt.gensalt()).decode())"
# Leave blank to allow login without a password in ENV=dev only.
ADMIN_PASSWORD_HASH=

# ── Upload Limits ───────────────────────────────────────────────────────────────
# Maximum PDF upload size in MB (default: 50)
MAX_FILE_SIZE_MB=50

# ── CORS ────────────────────────────────────────────────────────────────────────
# Comma-separated list of allowed origins. Use * to allow all (dev only).
# Example: https://yourapp.com,https://admin.yourapp.com
ALLOWED_ORIGINS=*
