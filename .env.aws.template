# ── AWS Production Environment ─────────────────────────────────────────────────
# Copy this file to the EC2 instance as /home/ec2-user/.env.prod
# Usage: docker run --env-file /home/ec2-user/.env.prod ...
#
# IMPORTANT: When using `docker run --env-file`, $ signs are read LITERALLY.
# Do NOT use $$ escaping here — use plain $ in the bcrypt hash.
# (The $$ escaping is only needed in docker-compose .env files.)

# ── Environment ─────────────────────────────────────────────────────────────────
ENV=production

# ── Admin Login Credentials ─────────────────────────────────────────────────────
# Generate hash on your machine:
#   python -c "import bcrypt; print(bcrypt.hashpw(b'YourPassword', bcrypt.gensalt()).decode())"
# Paste the result below as-is (plain $, NOT $$).
ADMIN_USERNAME=admin
ADMIN_PASSWORD_HASH=$2b$12$YvRCYMC1ABcZQ6rznHiU2ekqQcMvbZaLS3/hPBFCiCnB4.2yrv1Oa

# ── API Key (for programmatic / X-API-Key access) ──────────────────────────────
# Generate: python -c "import secrets; print(secrets.token_hex(32))"
API_KEY=REPLACE_WITH_STRONG_RANDOM_SECRET

# ── OpenAI ──────────────────────────────────────────────────────────────────────
OPENAI_API_KEY=sk-proj-REPLACE_WITH_YOUR_KEY

# ── Database (AWS RDS PostgreSQL) ───────────────────────────────────────────────
# Replace with your actual RDS endpoint from AWS Console → RDS → Endpoints
DATABASE_URL=postgresql://med:REPLACE_PASSWORD@your-db.xxxx.us-east-1.rds.amazonaws.com:5432/medextract

# ── CORS ─────────────────────────────────────────────────────────────────────────
# Lock this down to your actual domain in production. Never use * in production.
# Example: https://yourapp.com,https://admin.yourapp.com
ALLOWED_ORIGINS=https://your-domain.com

# ── Upload Limits ────────────────────────────────────────────────────────────────
MAX_FILE_SIZE_MB=50

# ── OCR Settings ─────────────────────────────────────────────────────────────────
OCR_CONFIDENCE_THRESHOLD=0.7
OCR_ENGINE_PRIMARY=tesseract
OCR_ENGINE_FALLBACK=tesseract

# ── Concurrency ──────────────────────────────────────────────────────────────────
# t3.small:  MAX_WORKERS=4,  AI_CONCURRENCY=5
# t3.medium: MAX_WORKERS=8,  AI_CONCURRENCY=10
# t3.large:  MAX_WORKERS=12, AI_CONCURRENCY=15
MAX_WORKERS=8
AI_CONCURRENCY=10

# ── Mock Mode ────────────────────────────────────────────────────────────────────
MOCK_AI=false
